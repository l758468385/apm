<!DOCTYPE html>
<html>
<head>
  <title>性能监控测试页面</title>
  <script src="/dist/network-monitor.min.js"></script>
  <script>
    // 初始化监控
    networkMonitor.init({
      aid: 'test-aid',
      token: 'test-token',
      reportUrl: 'http://localhost:3333/collect',
      sampleRate: {
        performance: 1,
        resource: 1,
        resourceError: 1,
        jsError: 1,
        http: 1,
        blankScreen: 1
      },
      debug: true
    });
  </script>
  <style>
    .test-section {
      margin: 20px;
      padding: 20px;
      border: 1px solid #ccc;
    }
    .loading-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>
  <!-- 白屏测试 -->
  <div id="app"></div>



  <script>
    // 模拟白屏
    setTimeout(() => {
      // 3秒后才加载内容
      document.getElementById('app').innerHTML = `
        <div class="test-section">
          <h2>性能指标测试</h2>
          <button onclick="triggerLongTask()">触发长任务</button>
          <button onclick="triggerLayoutShift()">触发布局偏移</button>
        </div>
      `;
    }, 3000);

    // 模拟长任务
    function triggerLongTask() {
      const start = Date.now();
      while (Date.now() - start < 100) {
        // 执行耗时操作
      }
    }

    // 模拟布局偏移
    function triggerLayoutShift() {
      const div = document.createElement('div');
      div.style.height = '100px';
      document.body.insertBefore(div, document.body.firstChild);
    }
  </script>
</body>
</html> 